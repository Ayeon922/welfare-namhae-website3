{% extends "base.html" %}

{% block title %}ë³µì§€ ì¶”ì²œ ê²°ê³¼ - ë…¸ì¸ ë³µì§€ ì¶”ì²œ í”Œë«í¼{% endblock %}

{% block content %}
<div class="results-page">
    <div class="results-header">
        <h1 class="results-title">ğŸ¯ ë§ì¶¤í˜• ë³µì§€ í”„ë¡œê·¸ë¨ ì¶”ì²œ ê²°ê³¼</h1>
        <div class="user-summary">
            <h2>{{ user_data.name }}ë‹˜ì„ ìœ„í•œ ì¶”ì²œ ê²°ê³¼</h2>
            <div class="user-info">
                <span class="info-item">ğŸ“… {{ user_data.age }}ì„¸</span>
                <span class="info-item">ğŸ“ {{ user_data.region }}</span>
                <span class="info-item">ğŸ—“ï¸ {{ current_time.strftime('%Yë…„ %mì›” %dì¼') }}</span>
            </div>
        </div>
    </div>
    
    <div class="recommendations-container">
        {% if recommendations %}
            <div class="recommendations-summary">
                <div class="summary-card">
                    <div class="summary-icon">ğŸ“Š</div>
                    <div class="summary-content">
                        <h3>ì´ {{ recommendations|length }}ê°œì˜ ë³µì§€ í”„ë¡œê·¸ë¨</h3>
                        <p>{{ user_data.name }}ë‹˜ì˜ ìƒí™©ì— ë§ëŠ” í”„ë¡œê·¸ë¨ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
            
            <div class="recommendations-list">
                {% for recommendation in recommendations %}
                <div class="recommendation-card priority-{{ loop.index }}">
                    <div class="card-header">
                        <div class="program-badge">
                            <span class="badge-rank">#{{ loop.index }}</span>
                            <span class="badge-category">{{ recommendation.program.category }}</span>
                        </div>
                        <div class="match-score">
                            <span class="score-label">ë§¤ì¹­ë„</span>
                            <span class="score-value">{{ (recommendation.score * 10)|round|int }}%</span>
                        </div>
                    </div>
                    
                    <div class="card-content">
                        <h3 class="program-name">{{ recommendation.program.name }}</h3>
                        <p class="program-description">{{ recommendation.program.description }}</p>
                        
                        <div class="program-details">
                            <div class="detail-item">
                                <strong>ğŸ“‹ ëŒ€ìƒì:</strong>
                                <span>{{ recommendation.program.target_condition }}</span>
                            </div>
                            <div class="detail-item">
                                <strong>ğŸ’° ì§€ì› ë‚´ìš©:</strong>
                                <span>{{ recommendation.program.benefit_amount }}</span>
                            </div>
                            <div class="detail-item">
                                <strong>ğŸ“ ë¬¸ì˜ì²˜:</strong>
                                <span>{{ recommendation.program.contact_info }}</span>
                            </div>
                        </div>
                        
                        <div class="application-info">
                            <h4>ğŸ“ ì‹ ì²­ ë°©ë²•</h4>
                            <p>{{ recommendation.program.application_method }}</p>
                        </div>
                        
                        {% if recommendation.recommendation_reason and recommendation.recommendation_reason != "AI ì¶”ì²œ ê¸°ëŠ¥ì€ OpenAI API í‚¤ê°€ ì„¤ì •ë˜ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." %}
                        <div class="ai-recommendation">
                            <h4>ğŸ¤– AI ì¶”ì²œ ì´ìœ </h4>
                            <p>{{ recommendation.recommendation_reason }}</p>
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="card-actions">
                        <button class="action-btn primary" onclick="expandDetails({{ loop.index0 }})">
                            <span class="btn-text">ìì„¸íˆ ë³´ê¸°</span>
                            <span class="btn-icon">â–¼</span>
                        </button>
                        <button class="action-btn secondary" onclick="copyProgramInfo({{ loop.index0 }})">
                            ğŸ“‹ ì •ë³´ ë³µì‚¬
                        </button>
                    </div>
                    
                    <div class="detailed-info" id="details-{{ loop.index0 }}" style="display: none;">
                        <div class="info-section">
                            <h5>ğŸ¯ ì‹ ì²­ ìê²© ì„¸ë¶€ì‚¬í•­</h5>
                            <ul>
                                <li>ì—°ë ¹: {{ recommendation.program.target_age }}</li>
                                <li>ì¡°ê±´: {{ recommendation.program.target_condition }}</li>
                                <li>ì§€ì—­: {{ recommendation.program.region }}</li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h5>ğŸ“‹ ì¤€ë¹„ ì„œë¥˜ (ì¼ë°˜ì )</h5>
                            <ul>
                                <li>ì‹ ë¶„ì¦ (ì£¼ë¯¼ë“±ë¡ì¦, ìš´ì „ë©´í—ˆì¦ ë“±)</li>
                                <li>ì£¼ë¯¼ë“±ë¡ë“±ë³¸</li>
                                <li>ì†Œë“ ê´€ë ¨ ì„œë¥˜ (í•„ìš”ì‹œ)</li>
                                <li>ê¸°íƒ€ í•´ë‹¹ í”„ë¡œê·¸ë¨ë³„ í•„ìš” ì„œë¥˜</li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h5>â° ì²˜ë¦¬ ê¸°ê°„</h5>
                            <p>ì¼ë°˜ì ìœ¼ë¡œ ì‹ ì²­ í›„ 2-4ì£¼ ì†Œìš” (í”„ë¡œê·¸ë¨ë³„ ìƒì´)</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-recommendations">
                <div class="no-results-icon">ğŸ˜”</div>
                <h3>ì¶”ì²œí•  ìˆ˜ ìˆëŠ” ë³µì§€ í”„ë¡œê·¸ë¨ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                <p>í˜„ì¬ ì…ë ¥í•˜ì‹  ì¡°ê±´ì— ì •í™•íˆ ë§ëŠ” í”„ë¡œê·¸ë¨ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
                <div class="alternative-actions">
                    <button class="action-btn primary" onclick="window.location.href='{{ url_for('survey_step1') }}'">
                        ğŸ”„ ë‹¤ì‹œ ì„¤ë¬¸í•˜ê¸°
                    </button>
                    <button class="action-btn secondary" onclick="contactSupport()">
                        ğŸ“ ìƒë‹´ ë¬¸ì˜í•˜ê¸°
                    </button>
                </div>
            </div>
        {% endif %}
    </div>
    
    <div class="results-actions">
        <div class="action-group">
            <button id="print-results" class="action-btn large primary">
                ğŸ–¨ï¸ ê²°ê³¼ ì¸ì‡„í•˜ê¸°
            </button>
            <button id="save-pdf" class="action-btn large secondary">
                ğŸ“„ PDFë¡œ ì €ì¥
            </button>
        </div>
        
        <div class="action-group">
            <button class="action-btn large secondary" onclick="window.location.href='{{ url_for('survey_step1') }}'">
                ğŸ”„ ìƒˆë¡œ ì‹œì‘í•˜ê¸°
            </button>
            <button class="action-btn large secondary" onclick="window.location.href='{{ url_for('index') }}'">
                ğŸ  ì²˜ìŒìœ¼ë¡œ
            </button>
        </div>
    </div>
    
    <div class="additional-resources">
        <h3>ğŸ”— ì¶”ê°€ ë„ì›€ ë°›ê¸°</h3>
        <div class="resource-cards">
            <div class="resource-card">
                <div class="resource-icon">ğŸ“</div>
                <h4>ì „í™” ìƒë‹´</h4>
                <p>ë³´ê±´ë³µì§€ë¶€ ì½œì„¼í„°</p>
                <strong>129</strong>
            </div>
            <div class="resource-card">
                <div class="resource-icon">ğŸ¢</div>
                <h4>ë°©ë¬¸ ìƒë‹´</h4>
                <p>ê°€ê¹Œìš´ ì£¼ë¯¼ì„¼í„°</p>
                <strong>í‰ì¼ 09:00-18:00</strong>
            </div>
            <div class="resource-card">
                <div class="resource-icon">ğŸŒ</div>
                <h4>ì˜¨ë¼ì¸ ìƒë‹´</h4>
                <p>ì •ë¶€24 ë³µì§€í¬í„¸</p>
                <strong>24ì‹œê°„ ì´ìš©</strong>
            </div>
        </div>
    </div>
    
    <div class="important-notice">
        <h3>âš ï¸ ì¤‘ìš” ì•ˆë‚´ì‚¬í•­</h3>
        <ul>
            <li>ì´ ì¶”ì²œ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ì§€ì› ì—¬ë¶€ëŠ” í•´ë‹¹ ê¸°ê´€ì—ì„œ ìµœì¢… ê²°ì •ë©ë‹ˆë‹¤.</li>
            <li>ë³µì§€ í”„ë¡œê·¸ë¨ì€ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì‹ ì²­ ì „ ìµœì‹  ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</li>
            <li>ìì„¸í•œ ìƒë‹´ì€ í•´ë‹¹ ê¸°ê´€ ë˜ëŠ” ì£¼ë¯¼ì„¼í„°ì— ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</li>
            <li>ê°œì¸ì •ë³´ëŠ” 24ì‹œê°„ í›„ ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ì¸ì‡„ ë²„íŠ¼ ê¸°ëŠ¥
    document.getElementById('print-results').addEventListener('click', function() {
        // ìƒˆ ì°½ì—ì„œ ì¸ì‡„ìš© í˜ì´ì§€ ì—´ê¸°
        window.open('/print_results', '_blank');
    });
    
    // PDF ì €ì¥ ê¸°ëŠ¥ (ë¸Œë¼ìš°ì € ì¸ì‡„ ëŒ€í™”ìƒì ì‚¬ìš©)
    document.getElementById('save-pdf').addEventListener('click', function() {
        window.print();
    });
    
    // ìŒì„± ì•ˆë‚´
    if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance('ë³µì§€ í”„ë¡œê·¸ë¨ ì¶”ì²œ ê²°ê³¼ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. {{ recommendations|length }}ê°œì˜ í”„ë¡œê·¸ë¨ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.');
        msg.lang = 'ko-KR';
        msg.rate = 0.8;
        setTimeout(() => {
            speechSynthesis.speak(msg);
        }, 1000);
    }
});

// ìƒì„¸ ì •ë³´ í™•ì¥/ì¶•ì†Œ
function expandDetails(index) {
    const detailsDiv = document.getElementById(`details-${index}`);
    const btn = event.target.closest('.action-btn');
    const icon = btn.querySelector('.btn-icon');
    const text = btn.querySelector('.btn-text');
    
    if (detailsDiv.style.display === 'none') {
        detailsDiv.style.display = 'block';
        icon.textContent = 'â–²';
        text.textContent = 'ê°„ë‹¨íˆ ë³´ê¸°';
        
        // ìŒì„± ì•ˆë‚´
        if ('speechSynthesis' in window) {
            const msg = new SpeechSynthesisUtterance('ìƒì„¸ ì •ë³´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.');
            msg.lang = 'ko-KR';
            msg.rate = 0.8;
            msg.volume = 0.5;
            speechSynthesis.speak(msg);
        }
    } else {
        detailsDiv.style.display = 'none';
        icon.textContent = 'â–¼';
        text.textContent = 'ìì„¸íˆ ë³´ê¸°';
    }
}

// í”„ë¡œê·¸ë¨ ì •ë³´ ë³µì‚¬
function copyProgramInfo(index) {
    const card = document.querySelector(`.recommendation-card:nth-child(${index + 1})`);
    const programName = card.querySelector('.program-name').textContent;
    const programDesc = card.querySelector('.program-description').textContent;
    const contactInfo = card.querySelector('.detail-item:nth-child(3) span').textContent;
    
    const copyText = `${programName}\n${programDesc}\në¬¸ì˜ì²˜: ${contactInfo}`;
    
    // í´ë¦½ë³´ë“œì— ë³µì‚¬
    if (navigator.clipboard) {
        navigator.clipboard.writeText(copyText).then(() => {
            showNotification('í”„ë¡œê·¸ë¨ ì •ë³´ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        });
    } else {
        // í´ë°±: textarea ë°©ì‹
        const textArea = document.createElement('textarea');
        textArea.value = copyText;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        showNotification('í”„ë¡œê·¸ë¨ ì •ë³´ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
    }
}

// ìƒë‹´ ë¬¸ì˜ ê¸°ëŠ¥
function contactSupport() {
    const phoneNumber = '129';
    const message = `ì „í™” ìƒë‹´ì„ ì›í•˜ì‹œë©´ ${phoneNumber}ë²ˆìœ¼ë¡œ ì—°ë½í•´ì£¼ì„¸ìš”.\n\në³´ê±´ë³µì§€ë¶€ ì½œì„¼í„°ì—ì„œ ìì„¸í•œ ì•ˆë‚´ë¥¼ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    
    if (confirm(message)) {
        // ì „í™” ê±¸ê¸° (ëª¨ë°”ì¼ì—ì„œë§Œ ì‘ë™)
        window.location.href = `tel:${phoneNumber}`;
    }
}

// ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
function showNotification(message, type = 'info') {
    if (window.WelfareApp && window.WelfareApp.Utils) {
        window.WelfareApp.Utils.notify(message, type);
    } else {
        alert(message);
    }
}

// ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('animate-in');
        }
    });
}, observerOptions);

// ì¶”ì²œ ì¹´ë“œì— ì• ë‹ˆë©”ì´ì…˜ ì ìš©
document.querySelectorAll('.recommendation-card').forEach(card => {
    observer.observe(card);
});
</script>

<style>
.results-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: var(--spacing-xl);
}

.results-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
    padding-bottom: var(--spacing-xl);
    border-bottom: 2px solid var(--border-color);
}

.results-title {
    font-size: var(--font-size-3xl);
    color: var(--primary-color);
    margin-bottom: var(--spacing-lg);
}

.user-summary h2 {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--spacing-md);
    color: var(--text-primary);
}

.user-info {
    display: flex;
    justify-content: center;
    gap: var(--spacing-lg);
    flex-wrap: wrap;
}

.info-item {
    background: var(--bg-secondary);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius);
    font-size: var(--font-size-base);
    color: var(--text-secondary);
}

.recommendations-summary {
    margin-bottom: var(--spacing-xl);
}

.summary-card {
    background: linear-gradient(135deg, var(--primary-color), #4f46e5);
    color: white;
    padding: var(--spacing-xl);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
}

.summary-icon {
    font-size: var(--font-size-3xl);
}

.summary-content h3 {
    font-size: var(--font-size-xl);
    margin-bottom: var(--spacing-sm);
}

.recommendations-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xl);
}

.recommendation-card {
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(20px);
}

.recommendation-card.animate-in {
    opacity: 1;
    transform: translateY(0);
}

.recommendation-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

.recommendation-card.priority-1 {
    border-left: 5px solid #f59e0b;
}

.recommendation-card.priority-2 {
    border-left: 5px solid #10b981;
}

.recommendation-card.priority-3 {
    border-left: 5px solid #3b82f6;
}

.card-header {
    background: var(--bg-secondary);
    padding: var(--spacing-md) var(--spacing-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.program-badge {
    display: flex;
    gap: var(--spacing-sm);
    align-items: center;
}

.badge-rank {
    background: var(--primary-color);
    color: white;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: 50%;
    font-weight: 700;
    min-width: 30px;
    text-align: center;
}

.badge-category {
    background: var(--bg-gray);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.match-score {
    text-align: right;
}

.score-label {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.score-value {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--primary-color);
}

.card-content {
    padding: var(--spacing-xl);
}

.program-name {
    font-size: var(--font-size-xl);
    color: var(--primary-color);
    margin-bottom: var(--spacing-md);
}

.program-description {
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-lg);
    line-height: 1.6;
}

.program-details {
    margin-bottom: var(--spacing-lg);
}

.detail-item {
    display: flex;
    margin-bottom: var(--spacing-sm);
    align-items: flex-start;
    gap: var(--spacing-sm);
}

.detail-item strong {
    min-width: 100px;
    color: var(--text-primary);
}

.application-info,
.ai-recommendation {
    background: var(--bg-secondary);
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-md);
}

.application-info h4,
.ai-recommendation h4 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
    color: var(--text-primary);
}

.card-actions {
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-secondary);
    display: flex;
    gap: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

.action-btn {
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: var(--font-size-base);
    font-weight: 600;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.action-btn.primary {
    background: var(--primary-color);
    color: white;
}

.action-btn.primary:hover {
    background: var(--primary-hover);
}

.action-btn.secondary {
    background: white;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.action-btn.secondary:hover {
    background: var(--bg-secondary);
}

.action-btn.large {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
}

.detailed-info {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--border-color);
    background: var(--bg-primary);
}

.info-section {
    margin-bottom: var(--spacing-lg);
}

.info-section h5 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
    color: var(--primary-color);
}

.info-section ul {
    list-style: none;
    padding: 0;
}

.info-section li {
    padding: var(--spacing-xs) 0;
    border-bottom: 1px solid var(--border-color);
}

.info-section li:before {
    content: "âœ“ ";
    color: var(--success-color);
    font-weight: 700;
}

.results-actions {
    margin: var(--spacing-2xl) 0;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    align-items: center;
}

.action-group {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    justify-content: center;
}

.no-recommendations {
    text-align: center;
    padding: var(--spacing-3xl);
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
}

.no-results-icon {
    font-size: 4rem;
    margin-bottom: var(--spacing-lg);
}

.alternative-actions {
    margin-top: var(--spacing-xl);
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
}

.additional-resources {
    margin: var(--spacing-2xl) 0;
    padding: var(--spacing-xl);
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
}

.additional-resources h3 {
    text-align: center;
    margin-bottom: var(--spacing-lg);
    color: var(--text-primary);
}

.resource-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-lg);
}

.resource-card {
    background: white;
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    text-align: center;
    box-shadow: var(--shadow-sm);
    transition: all 0.2s ease;
}

.resource-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.resource-icon {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--spacing-md);
}

.resource-card h4 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
    color: var(--text-primary);
}

.resource-card p {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.resource-card strong {
    color: var(--primary-color);
    font-size: var(--font-size-lg);
}

.important-notice {
    background: #fff7ed;
    border: 1px solid #fed7aa;
    border-radius: var(--border-radius);
    padding: var(--spacing-lg);
    margin-top: var(--spacing-2xl);
}

.important-notice h3 {
    color: #ea580c;
    margin-bottom: var(--spacing-md);
}

.important-notice ul {
    list-style: none;
    padding: 0;
}

.important-notice li {
    padding: var(--spacing-xs) 0;
    color: var(--text-secondary);
    line-height: 1.5;
}

.important-notice li:before {
    content: "â€¢ ";
    color: #ea580c;
    font-weight: 700;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .user-info {
        flex-direction: column;
        align-items: center;
    }
    
    .card-actions {
        flex-direction: column;
    }
    
    .action-group {
        flex-direction: column;
    }
    
    .resource-cards {
        grid-template-columns: 1fr;
    }
    
    .detail-item {
        flex-direction: column;
        gap: var(--spacing-xs);
    }
    
    .detail-item strong {
        min-width: auto;
    }
}

/* ì¸ì‡„ ì‹œ ìŠ¤íƒ€ì¼ */
@media print {
    .results-actions,
    .card-actions,
    .accessibility-toolbar {
        display: none !important;
    }
    
    .recommendation-card {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}
</style>
{% endblock %} 